import subprocess
import xmltodict
import json
import os
xml_file_path = 'nmap_out.xml'
json_file_path = 'output.json'

def convert_xml_json(xml_file_path,json_file_path):
    with open(xml_file_path, 'r', encoding='utf-8') as xml_file:
        xml_content = xml_file.read()

    dict_data = xmltodict.parse(xml_content)

    with open(json_file_path, 'w', encoding='utf-8') as json_file:
        json.dump(dict_data, json_file, ensure_ascii=False, indent=4)

target = 'google.com'
print(target)
command = ['nmap', '-A', '-T4','-oX','nmap_out.xml', target]
subprocess.run(command, check=True, capture_output=True)

convert_xml_json(xml_file_path,json_file_path)
    
